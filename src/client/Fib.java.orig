package client;

import api.Space;
import tasks.*;
import java.rmi.registry.*;

public class Fib {

    public static void main(String[] args) throws Exception {
        if (args.length == 0) return;

        int NTH_NUMBER = 20;
        int port = 8888;
        String url = args[0];
        Registry registry = LocateRegistry.getRegistry(url, port);

        Space space = (Space) registry.lookup(Space.SERVICE_NAME);
        FibTask fibTask = new FibTask(NTH_NUMBER);

        long clientRunTime = System.nanoTime();
<<<<<<< HEAD
        space.publishTask(fibTask);
        Result result = space.takeResult(fibTask.getTaskIdentifier());
=======
        space.put(fibTask);
        FibResult result = (FibResult)space.take();
>>>>>>> 777b5fbb3b3393be56ce915a77e411849169d806
        System.out.println(NTH_NUMBER + "th number of fib: " + result.getTaskReturnValue());
        System.out.println("Runtime: " + result.getTaskRunTime());
        System.out.println("Client time: " + (System.nanoTime() - clientRunTime));

    }

}
